{% extends "base.html" %}
{% load static %}
{% block title %}üì¢ {{ petition.title }}{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-10">
            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-body p-5">

                    {% include "petitions/partials/_petition_header.html" %}
                    <hr class="my-4">
                    {% include "petitions/partials/_petition_support.html" %}
                    {% include "petitions/partials/_petition_actions.html" %}
                    {% include "petitions/partials/_support_button.html" %}

                    {% if request.user == petition.creator or request.user.role in "director admin" %}
                        <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫—É –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ -->
                        {% if request.user == petition.creator %}
                            <button type="button"
                                    class="btn btn-danger rounded-pill mt-4"
                                    data-bs-toggle="modal"
                                    data-bs-target="#deletePetitionModal">
                                üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏ –ø–µ—Ç–∏—Ü—ñ—é
                            </button>
                        {% endif %}
                    {% endif %}

                    <hr class="my-4">
                    {% include "petitions/partials/_comments.html" %}

                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–µ—Ç–∏—Ü—ñ—ó -->
<div class="modal fade" id="deletePetitionModal" tabindex="-1"
     aria-labelledby="deletePetitionModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content rounded-4 shadow">
            <form method="post" action="{% url 'petition_delete' petition.pk %}">
                {% csrf_token %}
                <div class="modal-header bg-danger text-white rounded-top-4">
                    <h5 class="modal-title" id="deletePetitionModalLabel">‚ùó –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø–µ—Ç–∏—Ü—ñ—ó</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä–∏—Ç–∏"></button>
                </div>
                <div class="modal-body">
                    <p class="mb-0">–í–∏ —Å–ø—Ä–∞–≤–¥—ñ —Ö–æ—á–µ—Ç–µ <strong>–≤–∏–¥–∞–ª–∏—Ç–∏ —Ü—é –ø–µ—Ç–∏—Ü—ñ—é</strong>?</p>
                    <p class="text-muted small mt-2">–¶—é –¥—ñ—é –Ω–µ–º–æ–∂–ª–∏–≤–æ —Å–∫–∞—Å—É–≤–∞—Ç–∏.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary rounded-pill" data-bs-dismiss="modal">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                    <button type="submit" class="btn btn-danger rounded-pill">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'petitions/js/petition.js' %}"></script>
<style>
.fade-in {
    animation: fadeIn 0.5s ease-in-out;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
{% endblock %}
