{% extends "base.html" %}
{% load widget_tweaks %}

{% block title %}–ö–ª–∞—Å–∏{% endblock %}

{% block content %}
<div class="container py-5">
  <h2 class="fw-bold">üìö –ö–ª–∞—Å–∏</h2>

  {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
  {% endfor %}

  <!-- –°–ø–∏—Å–æ–∫ –∫–ª–∞—Å—ñ–≤ -->
  {% if classes %}
    <ul class="list-group mb-4">
      {% for cls in classes %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <form method="post" action="{% url 'edit_class' cls.id %}" class="d-flex align-items-center gap-2" style="flex-grow: 1;">
            {% csrf_token %}
            <input type="text" name="name" value="{{ cls.name }}" class="form-control form-control-sm" required>
            <button type="submit" class="btn btn-primary btn-sm">üíæ</button>
          </form>

          <form method="post" action="{% url 'delete_class' cls.id %}" style="margin-left:10px;">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger btn-sm"
                    onclick="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏ –∫–ª–∞—Å ¬´{{ cls.name }}¬ª?')">üóë</button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-muted">–ö–ª–∞—Å–∏ —â–µ –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ.</p>
  {% endif %}

  <!-- –§–æ—Ä–º–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è -->
  <h4 class="mt-5">‚ûï –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –∫–ª–∞—Å</h4>
  <form method="post" action="{% url 'create_class' %}">
    {% csrf_token %}
    {{ form.non_field_errors }}
    <div class="mb-3">
      {{ form.name.label_tag }}
      {{ form.name|add_class:"form-control" }}
    </div>
    <button type="submit" class="btn btn-success">–î–æ–¥–∞—Ç–∏</button>
  </form>
</div>
{% endblock %}
